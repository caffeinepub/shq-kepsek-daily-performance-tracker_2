{
  "kind": "spec_vs_diff_report",
  "version": "1.0",
  "generatedAt": "2026-02-15T04:51:37.871Z",
  "summary": "Frontend adds an Admin “Active Schools” section component with search, counts, loading skeletons, error/empty states, and wires it into AdminDashboardPage. The diff does not provide clear evidence (in the truncated backend/main.mo and truncated useQueries.ts) that the required new admin-only backend query and the dedicated React Query hook are implemented.",
  "missing_requirements": [
    {
      "id": "REQ-12",
      "requirement": "Add an admin-only backend query returning a list of active schools (active=true) including school.name, school.region, school.principalName, school.active, and the associated Principal (Kepsek) ID; non-admin calls must trap/return an auth error; getActiveSchoolsCount must remain unchanged.",
      "reason": "backend/main.mo is truncated and the diff excerpt does not show any new query method for listing active schools, nor the authorization behavior or returned shape required by REQ-12.",
      "evidence": [
        "backend/main.mo"
      ]
    },
    {
      "id": "REQ-13",
      "requirement": "Add a React Query hook in frontend/src/hooks/useQueries.ts to fetch the active schools list under a stable query key, disabled until actor is available, surfacing Error on failure, and providing an empty list in the UI path when no data yet.",
      "reason": "useQueries.ts is truncated before showing any hook named useGetActiveSchoolsList (though it is imported/used by the UI). The hook implementation, query key, enabled condition, and error handling cannot be verified from the provided excerpt.",
      "evidence": [
        "frontend/src/hooks/useQueries.ts",
        "frontend/src/components/admin/ActiveSchoolsSection.tsx"
      ]
    }
  ],
  "hallucinated_features": [],
  "confidence": 0.55,
  "changed_files": [
    "backend/main.mo",
    "frontend-file-summaries.txt",
    "frontend/src/components/admin/ActiveSchoolsSection.tsx",
    "frontend/src/hooks/useQueries.ts",
    "frontend/src/pages/AdminDashboardPage.tsx",
    "project_state.json"
  ]
}